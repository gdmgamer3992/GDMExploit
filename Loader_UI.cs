using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Net;
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace GDMploits
{
    public partial class Loader_UI : Form
    {
        public Loader_UI()
        {
            InitializeComponent();
        }

        private void siticoneButton4_Click(object sender, EventArgs e)
        {
            Application.Exit();
        }

        private async void timer1_Tick(object sender, EventArgs e)
        {
            timer1.Stop();
            await Task.Delay(1234);
            WebClient updatecheck = new WebClient();
            panel3.Width = 120;
            label1.Text = ("Checking For Update");               
            await Task.Delay(1234);
            if (!updatecheck.DownloadString("https://raw.githubusercontent.com/gdmgamer3992/GDMExploits/main/UpdateCheck").Contains("1.0.0_dev"))
            {
                label1.Text = ("Please Update");
                MessageBox.Show("Exiting in 5 Seconds", "Crash", MessageBoxButtons.OK, MessageBoxIcon.Error);
                await Task.Delay(5000);
            }
            else
            {
                panel3.Width = 210;
                label1.Text = ("Checking For Patch");
                WebClient patchcheck = new WebClient();
                await Task.Delay(1234);
                if (!patchcheck.DownloadString("https://raw.githubusercontent.com/gdmgamer3992/GDMExploits/main/Checking%20For%20Patch").Contains("notpatched"))
                {
                    MessageBox.Show("GDMExploits_Dev is patched right now Join The server for latest/announcement", "Patch", MessageBoxButtons.OK, MessageBoxIcon.Error);
                    System.Diagnostics.Process.Start("https://discord.gg/DT9hwXmc");
                    await Task.Delay(5000);
                    Application.Exit();
                }
                else
                {
                    panel3.Width = 310;
                    label1.Text = ("Loading GDMExploits . . .");
                    await Task.Delay(2000);
                    panel3.Width = 425;
                    label1.Text = ("Redirecting in 3 Seconds. ");
                    await Task.Delay(1000);
                    label1.Text = ("Redirecting in 2 Seconds. . ");
                    await Task.Delay(1000);
                    label1.Text = ("Redirecting in 1 Seconds. . .");
                    await Task.Delay(1000);
                    this.Hide();
                    Main_UI mainui = new Main_UI();
                    mainui.Show();
                }
            }
        }

        
    }
}
